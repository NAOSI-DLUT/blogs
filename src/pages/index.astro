---
import { Image } from "astro:assets";
import Card from "../components/Card.astro";
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

import NAOSI from "../assets/naosi.svg";

const blogroll = await getCollection("blogroll");
---

<Layout>
  <div class="p-4 prose mx-auto max-w-4xl">
    <h1 class="flex items-baseline gap-x-2">
      <Image class="inline w-3.5em" src={NAOSI} alt="naosi" /> Blogroll
    </h1>
    <p>
      æ”¶é›†å¤§å·¥äººä»¬çš„åšå®¢å‹é“¾ï¼å½“å‰å·²æ”¶å½• {blogroll.length} ä¸ªåšå®¢ã€‚æ¬¢è¿<a
        href="https://github.com/NAOSI-DLUT/blogroll">æäº¤åšå®¢</a
      >ï¼
    </p>
    <p>
      è®¢é˜… <a href="/opml.xml">opml.xml</a>
    </p>
    <div class="md:columns-2">
      {
        blogroll.map(async (blog) => {
          const { Content } = await blog.render();
          return (
            <div class="not-first:my-4 break-inside-avoid">
              <Card
                title={blog.data.title}
                description={blog.data.description}
                link={blog.data.link}
                image={blog.data.avatar}
              >
                <div class="text-sm">
                  <p>
                    <span>ğŸ‘‰</span>
                    <a href={blog.data.link}>ä¸»é¡µ</a>
                    {blog.data.rss && <a href={blog.data.rss}>RSS</a>}
                    {blog.data.avatar && <a href={blog.data.avatar}>å¤´åƒ</a>}
                  </p>
                  <Content />
                </div>
              </Card>
            </div>
          );
        })
      }
    </div>
  </div>
</Layout>
